<div >

    <a ng-if="projectKey === none" ui-sref="addEstimation({projectKey:projectKey})" role="button" class="btn btn-success btn-xs"><span class="glyphicon glyphicon-plus"></span></a>
    <a ui-sref="addEstimation({projectKey: projectKey})" role="button" class="btn btn-primary btn-xs"><span class="glyphicon glyphicon-plus"></span></a>

    <div ng-show="estimations.length === 0" style="margin: 10px">
        Нет оценок
    </div>

    <div>
        <span>Статус:</span>
        <select ng-model="filter" ng-options="item for item in filtrations">
        </select>
    </div>

    {{statuses}}

    <table class="table table-hover" ng-show="estimations.length > 0">
        <thead>
            <tr>
                <th>Key</th>
                <th>Описание</th>
                <th>Статус</th>
                <th>Проект</th>
                <th>Действия</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="est in estimations | filter : statusFilter">
                <td><a ui-sref="estimation({key: est.key})">{{est.key}}</a></td>
                <td>{{est.summary}}</td>
                <td>
                    <span ng-if="est.status === 'NEW'" class="label label-default">Новая</span>
                    <span ng-if="est.status === 'InProgress'" class="label label-primary">В работе</span>
                    <span ng-if="est.status === 'Questions'" class="label label-warning">Есть вопросы</span>
                    <span ng-if="est.status === 'Done'" class="label label-info">Готово</span>
                    <span ng-if="est.status === 'Sent'" class="label label-danger">Выслано</span>
                    <span ng-if="est.status === 'Approved'" class="label label-success">Согласовано</span>
                </td>
                <td><a ng-if="est.projectKey !== 'none'" ui-sref="projectEstimations({key: est.projectKey})">{{est.projectKey}}</a></td>
                <td>
                    <button
                            type="button"
                            class="btn btn-success btn-xs"
                            ui-sref="estimation({key: est.key})"
                            uib-tooltip="Просмотреть">
                        <span class="glyphicon glyphicon-eye-open"></span>
                    </button>
                    <button
                            type="button"
                            class="btn btn-danger btn-xs"
                            uib-tooltip="Удалить"
                            confirm-popup
                            confirm-title="Подтвердите удаление"
                            confirm-text="Подтвердите удаление эстимации"
                            confirm-button="Удалить"
                            cancel-button="Отмена"
                            confirm-method="deleteEstimation(est.key)">
                        <span class="glyphicon glyphicon-remove"></span>
                    </button>
                </td>
            </tr>
        </tbody>
    </table>
</div>